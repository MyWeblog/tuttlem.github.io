---
layout: post
title: Gouraud Shaing with Scan Line Polygons
date: 2013-11-20
comments: false
---

<h1>{{ page.title }}</h1>
<div class='post'>
<h3>Introduction</h3>In my <a href="http://cogsandlevers.blogspot.com.au/2013/11/scanline-based-filled-polygons.html">previous post</a>, we went through the basics of rasterising polygons on screen by use of horizontal lines. To sum up, we interpolated values along each edge of the polygon, collecting minimum and maximums for each y-axis instance.<br /><br />Today, we're going to define a colour value for each point on the polygon and interpolate the colours along each edge. This is the technique employed to draw polygons that are <a href="http://en.wikipedia.org/wiki/Gouraud_shading">Gouraud shaded</a>.<br /><br /><h3>The Code</h3>The structure of this is very similar to drawing a single colour block polygon. For a solid colour polygon, we interpolated the x values over the length of the y values. We'll now employ this same interpolation technique over the red, green, blue and alpha channels of each colour defined for each polygon point.<br /><br />Here's the scanline function.<br /><br /><br /><script src="https://gist.github.com/tuttlem/7561758.js"></script> <br />An immediate code restructure difference here from the first tutorial, is I'm now passing an actual point object through as opposed to each component of each point being a function parameter. This is just to clean up the interface of these functions.<br /><br />We're creating differentials not only for x now but also the r, g, b and a components. These will form the start and ending colours for each horizontal line that we'll draw. We still have extra interpolation to do once we're in the horizontal line draw function as well. Here it is.<br /><br /><br /><script src="https://gist.github.com/tuttlem/7561819.js"></script> <br />Again, more interpolation of colour components. This is what will give us a smooth shading effect over the polygon.<br /><br />Finally, the actual polygon function is a piece of cake. It just gets a little more complex as we have to send in colours for each point defined.<br /><br /><br /><script src="https://gist.github.com/tuttlem/7561874.js"></script> <br />Aside from the interface changing (just to clean it up a bit) and managing r, g, b and a components - this hasn't really changed from the block colour version. If you setup this polygon draw in a render loop, you should end up with something like this:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-CiuOyHrMVSo/UoyhbG4z5OI/AAAAAAAAAw4/AcYzDBUEhmA/s1600/Screen+Shot+2013-11-20+at+9.47.20+pm.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="156" src="http://1.bp.blogspot.com/-CiuOyHrMVSo/UoyhbG4z5OI/AAAAAAAAAw4/AcYzDBUEhmA/s320/Screen+Shot+2013-11-20+at+9.47.20+pm.png" width="320" /></a></div><br /><br /><br /><br />Smooth. <br /><br /><br /></div>
<h2>Comments</h2>
<div class='comments'>
</div>
