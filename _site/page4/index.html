<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Cogs and Levers &middot; A blog full of technical stuff
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>A place for thoughts, ideas, tutorials and bookmarks. My brain can only hold so much, you know.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>

    

    
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    

    <a class="sidebar-nav-item" href="https://github.com/tuttlem/tuttlem.github.io">GitHub</a>
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2014. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <label for="sidebar-checkbox" class="sidebar-toggle"></label>

          <h3 class="masthead-title">
            <a href="/" title="Home">Cogs and Levers</a>
            <small>A blog full of technical stuff</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2014/01/21/simple-forkio-usage/">
        Simple forkIO Usage
      </a>
    </h1>

    <span class="post-date">21 Jan 2014</span>

    <p>Creating new threads in Haskell is quite easy (once you know how). Here&#39;s a simple snippet for using <a href="http://hackage.haskell.org/package/base-4.6.0.1/docs/Control-Concurrent.html#v:forkIO">forkIO</a> and <a href="http://hackage.haskell.org/package/base-4.6.0.1/docs/Control-Concurrent.html#v:myThreadId">myThreadId</a> to get you started.</p>

<div class="highlight"><pre><code class="haskell"><span class="kr">module</span> <span class="nn">Main</span> <span class="kr">where</span>

<span class="kr">import</span> <span class="nn">Control.Concurrent</span>

<span class="nf">main</span> <span class="ow">::</span> <span class="kt">IO</span> <span class="nb">()</span>
<span class="nf">main</span> <span class="ow">=</span> <span class="kr">do</span>
    <span class="c1">-- grab the parent thread id and print it</span>
    <span class="n">parentId</span> <span class="ow">&lt;-</span> <span class="n">myThreadId</span>
    <span class="n">putStrLn</span> <span class="p">(</span><span class="n">show</span> <span class="n">parentId</span><span class="p">)</span>
    
    <span class="c1">-- create a new thread (ignore the return)</span>
    <span class="kr">_</span> <span class="ow">&lt;-</span> <span class="n">forkIO</span> <span class="o">$</span> <span class="kr">do</span>
      <span class="c1">-- grab the child thread id and print it</span>
      <span class="n">childId</span> <span class="ow">&lt;-</span> <span class="n">myThreadId</span>
      <span class="n">putStrLn</span> <span class="p">(</span><span class="n">show</span> <span class="n">childId</span><span class="p">)</span>
      
    <span class="n">return</span> <span class="nb">()</span></code></pre></div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2014/01/14/installing-software-from-testing-or-unstable-within-your-debian-stable-environment/">
        Installing Software from Testing or Unstable within your Debian Stable Environment
      </a>
    </h1>

    <span class="post-date">14 Jan 2014</span>

    <h3 id="introduction">Introduction</h3>

<p>The great thing about using the current stable version of <a href="www.debian.org">Debian</a> is that you&#39;re assured that a lot of testing has gone in to ensure that all of the packages you&#39;re looking at are in fact stable - sometimes this works against us as it takes so long for packages to become stable, making the Debian stable repository quite stale with its versions.</p>

<p>In today&#39;s post, I&#39;ll show you how you can install a package from a different repository (other than stable) within your stable Debian environment.</p>

<p>At the time of this writing, I&#39;m currently using &quot;Wheezy&quot; (codename for Stable). This makes &quot;Jessie&quot; the codename for Testing and &quot;Sid&quot; the codename for Unstable.</p>

<h3 id="adding-software-sources">Adding Software Sources</h3>

<p>In order to install software from another repository, you need to tell &quot;apt&quot; where to get the software from. Before making any changes, my /etc/apt/sources.list looks like this:</p>

<div class="highlight"><pre><code class="text">deb http://ftp.au.debian.org/debian/ wheezy main
deb-src http://ftp.au.debian.org/debian/ wheezy main

deb http://security.debian.org/ wheezy/updates main
deb-src http://security.debian.org/ wheezy/updates main

deb http://ftp.au.debian.org/debian/ wheezy-updates main
deb-src http://ftp.au.debian.org/debian/ wheezy-updates main</code></pre></div>

<p>The man page for &quot;sources.list&quot; will fill you in on the structure of these lines in your sources.list. For the purposes of this post, just take note that each line mentions &quot;wheezy&quot; at the end.</p>

<p>Without modification, if we were to use &quot;apt-cache policy&quot; we can find out what versions of a particular package are available to us. For the purposes of this post, I&#39;ll use &quot;haskell-platform&quot;. Taking a look at the cache policy for this package:</p>

<div class="highlight"><pre><code class="text">$ apt-cache policy haskell-platform
haskell-platform:
  Installed: (none)
  Candidate: 2012.2.0.0
  Version table:
     2012.2.0.0 0
        500 http://ftp.au.debian.org/debian/ wheezy/main amd64 Packages</code></pre></div>

<p>We&#39;ve got version &quot;2012.2.0.0&quot; available to us in the stable repository. With &quot;2013.2.0.0&quot; as the current version, we can see that stable is a little behind. Let&#39;s try and fix that.</p>

<p>We&#39;re going to add some software from the testing repository, so we&#39;re going to link up with the binary source pointed to &quot;jessie&quot;. To do this, we&#39;ll add one extra line to /etc/apt/sources.list, like so:</p>

<div class="highlight"><pre><code class="text">deb http://ftp.au.debian.org/debian/ wheezy main
deb-src http://ftp.au.debian.org/debian/ wheezy main
deb http://ftp.au.debian.org/debian/ jessie main

deb http://security.debian.org/ wheezy/updates main
deb-src http://security.debian.org/ wheezy/updates main

deb http://ftp.au.debian.org/debian/ wheezy-updates main
deb-src http://ftp.au.debian.org/debian/ wheezy-updates main</code></pre></div>

<p>Note the third line (new) that mentions &quot;jessie&quot;.</p>

<h3 id="setting-priorities">Setting Priorities</h3>

<p>Now that we&#39;ve confused apt, by mixing software sources - we need to set some priorities where the stable repository will take precedence over the testing repository.</p>

<p>To do this, we open/create the file <code>/etc/apt/preferences</code>. In this file, we can list out all of the repositories that we&#39;d like to use and assign a priority to them. Here&#39;s the sample putting a higher priority on stable:</p>

<div class="highlight"><pre><code class="text">Package: *
Pin: release a=stable
Pin-Priority: 700

Package: *
Pin: release a=testing
Pin-Priority: 600</code></pre></div>

<p>The instructions here are defining what packages these rules apply to, which release they apply to and what priority is to be applied. Now that we&#39;ve put these priorities in place, we&#39;ll update our local software cache:</p>

<div class="highlight"><pre><code class="bash"><span class="nv">$ </span>sudo apt-get update</code></pre></div>

<p>Then, we can take a look at the policy:</p>

<div class="highlight"><pre><code class="text">haskell-platform:
  Installed: (none)
  Candidate: 2012.2.0.0
  Version table:
     2013.2.0.0.debian3 0
        600 http://ftp.au.debian.org/debian/ jessie/main amd64 Packages
     2012.2.0.0 0
        700 http://ftp.au.debian.org/debian/ wheezy/main amd64 Packages</code></pre></div>

<p>We now have the ability to install the later package!</p>

<h3 id="installing">Installing</h3>

<p>With all of these rules in place now, installing software from a particular repository is as simple as:</p>

<div class="highlight"><pre><code class="bash"><span class="nv">$ </span>sudo apt-get -t testing install haskell-platform</code></pre></div>

<p>We&#39;ve passed the repository the <code>-t</code> option. This will take haskell-platform and associated dependencies from the testing repository.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2014/01/13/raii-for-c/">
        RAII for C++
      </a>
    </h1>

    <span class="post-date">13 Jan 2014</span>

    <h3 id="introduction">Introduction</h3>

<p>In programming, <a href="http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization">RAII</a> stands for &quot;Resource Acquisition is Initialization&quot; and it&#39;s an idiom or technique established by <a href="http://en.wikipedia.org/wiki/Bjarne_Stroustrup">Bjarne Stroustrup</a> to ease resource allocation and deallocation in C++.</p>

<p>Common problems have been when an exception is thrown during initialization, any memory associated during construction (or underlying resources) aren&#39;t released, creating memory leaks in applications.</p>

<h3 id="the-idea">The Idea</h3>

<p>The basic premise is that resource allocation is to be performed in the constructor of your class. Release of the resources occurs in your destructor. The example given on the <a href="http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization">Wikipedia page</a> deals with holding a lock/mutex for a given file. When execution leaves the scope of the code (whether it be from premature termination of an exception or from the code naturally exiting), the destructors run to release the file handle and lock.</p>

<p>The concept is a great way to not only clean up your code (as all of the &quot;if !null&quot; code is now redundant) but it&#39;s a great safe-guard that you can almost be absent minded about.</p>

<p>It&#39;s important to note that this idiom doesn&#39;t allow you to ignore good exception handling practice. You&#39;re still expected to use exception handling in your code, this will just ensure that your cleanup/release code is executed as expected.</p>

<h3 id="an-implementation">An Implementation</h3>

<p>Implementing this idea into your own code is really quite simple. If you have a resource (handle) that you&#39;re managing manually, wrap it in a class.</p>

<ul>
<li>Ensure the constructor takes the handle in</li>
<li>Release the handle in the destructor</li>
</ul>

<p>When working with OpenGL textures, I use a very small class that allows me to handle the resource cleanup, it just managed the generated texture id. When the class falls out of scope or there&#39;s a failure during initialization, the texture is cleaned up.</p>

<div class="highlight"><pre><code class="cpp"><span class="k">class</span> <span class="nc">texture</span> <span class="p">{</span>
  <span class="nl">public:</span>
    <span class="c1">// manage the generated texture id</span>
    <span class="n">texture</span><span class="p">(</span><span class="k">const</span> <span class="n">GLuint</span> <span class="n">t</span><span class="p">)</span> <span class="o">:</span> <span class="n">_reference</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
    
    <span class="c1">// cleanup of the allocated resource</span>
    <span class="k">virtual</span> <span class="o">~</span><span class="n">texture</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

    <span class="c1">// provide access to the reference</span>
    <span class="k">const</span> <span class="n">GLuint</span> <span class="n">reference</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">_reference</span><span class="p">;</span> <span class="p">}</span>

  <span class="nl">private:</span>
    <span class="n">GLuint</span> <span class="n">_reference</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">texture</span><span class="o">::~</span><span class="n">texture</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// only run if we have something to clean up</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">_reference</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// clear out the texture  </span>
    <span class="n">glDeleteTextures</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">&amp;</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">_reference</span><span class="p">);</span>
    <span class="k">this</span><span class="o">-&gt;</span><span class="n">_reference</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<p>Strictly speaking, the constructor should probably do the generation of the texture itself. Where I&#39;m loading the texture is in another managed object of itself. Most importantly, if an exception is thrown during initialization, this class will remove anything allocated to it (if it did allocate).</p>

<p>It should be mentioned that there are lots of extra attributes we can pile into RAII style classes. There&#39;s a really good write up (in depth) <a href="http://www.daniweb.com/software-development/cpp/tutorials/373787/beginning-c0x-making-a-raii-class">here</a>.</p>

<h3 id="conclusion">Conclusion</h3>

<p>RAII is a great idea to implement into your own classes. The more of this you can practice, the more exception-safe your code will become . . . from car accidents.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2014/01/11/custom-installs-with-checkinstall/">
        Custom Installs with Checkinstall
      </a>
    </h1>

    <span class="post-date">11 Jan 2014</span>

    <h3 id="introduction">Introduction</h3>

<p>Sometimes it&#39;s necessary to install a piece of software from source. This is normally an awkward process when you&#39;ve had a package manager taking care of all your software needs when you&#39;re faced with the proposition of installing something that the package manager is unaware of. Another concern is that some software developers don&#39;t do the simple things well - some makefiles won&#39;t even offer you the ability to uninstall a piece of software leaving you to try to remove the files that have been peppered into your system directories.</p>

<p>In today&#39;s post, I&#39;ll walk through a sample usage of the application <a href="https://wiki.debian.org/CheckInstall">CheckInstall</a> for Debian based Linux distributions.</p>

<h3 id="what-is-it?">What is it?</h3>

<p>From the <a href="https://wiki.debian.org/CheckInstall">CheckInstall</a> page on the Debian Wiki:</p>

<blockquote>
<p>CheckInstall keeps track of all the files created or modified by your  installation script (&quot;make&quot; &quot;make install&quot; &quot;make install_modules&quot;,  &quot;setup&quot;, etc), builds a standard binary package and installs it in your  system giving you the ability to uninstall it with your distribution&#39;s  standard package management utilities. </p>
</blockquote>

<p>The thing I love about the Debian distribution is the stability of the packages in its repositories. Sometimes, it&#39;s also what I&#39;m not to fond of as software vendors are bringing out new versions of their software and they don&#39;t make it into the stable repositories until they&#39;re deemed stable (which takes ages!) or they may never make it into the repositories.</p>

<h3 id="using-checkinstall">Using CheckInstall</h3>

<p>I&#39;ve used CheckInstall for quite a few packages in the past. Just recently, I&#39;ve used it to manage the installation of SDL2 onto my system.</p>

<div class="highlight"><pre><code class="bash"><span class="c"># extract your source package</span>
<span class="nv">$ </span>tar -zxvf SDL2-2.0.1.tar.gz

<span class="c"># configure and build as usual</span>
<span class="nv">$ </span><span class="nb">cd </span>SDL2-2.0.1
<span class="nv">$ </span>./configure
<span class="nv">$ </span>make

<span class="c"># use checkinstall on the installation step</span>
<span class="nv">$ </span>sudo checkinstall make install</code></pre></div>

<p>After this process had finished, a deb file was created for me which represented the files that had been installed on the system and the deb itself had been applied to the system.</p>

<p>The idea here is that it simplifies re-installation and removal by proxy of the generated deb package.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2014/01/10/hadoop-links/">
        Hadoop Links
      </a>
    </h1>

    <span class="post-date">10 Jan 2014</span>

    <p><a href="http://hadoop.apache.org/docs/current/hadoop-yarn/hadoop-yarn-site/YARN.html">Apache Hadoop NextGen MapReduce (YARN)</a></p>

<p><a href="http://hadoop.apache.org/docs/r2.2.0/hadoop-project-dist/hadoop-common/FileSystemShell.html">File System Shell Guide</a></p>

<p><a href="http://developer.yahoo.com/hadoop/tutorial/index.html">YAHOO! Hadoop Tutorial</a></p>

  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page5">Older</a>
  
  
    
      <a class="pagination-item newer" href="/page3">Newer</a>
    
  
</div>
      </div>
    </div>

  </body>
</html>
