---
layout: post
title: Applying Applicative
date: 2013-01-25
comments: false
---

<h1>{{ page.title }}</h1>
<div class='post'>
<h3>Introduction</h3><div>In a <a href="http://cogsandlevers.blogspot.com.au/2013/01/applicative-functors-in-haskell.html">previous post</a>, I had pretty much got the textbook definition down for an Applicative Functor and shown some of its pre-existing uses. Today's post, I want to walk through some code that I've written that implements Applicative.</div><div><br /></div><h3>Put it in context!</h3><div>Right on! It's all about context. When making instances of the <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t:Functor">Functor</a> typeclass, it's all about defining <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:fmap">fmap</a> appropriately to "operate" on the data that sits in a context.</div><div><br /></div><div>What's a context then? The books and articles that I've read use pre-existing types as examples. A list for instance is a context, <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t:Either">Either</a> is a context, <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t:Maybe">Maybe</a> is a context. All of these things wrap data. So, let's make our own context to put something in.</div><div><br /><script src="https://gist.github.com/4633650.js"></script></div><div><br /></div><div>There's our context, "CustomContext". It just wraps around something .. anything. We can apply a functor instance to this with the following.<br /><br /><script src="https://gist.github.com/4633664.js"></script></div><div><br /><a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:fmap">fmap</a>&nbsp;allows a function to get inside the context and operate on the inner data - alright, I've said this already. Proof that all of this is working is as follows.<br /><br /><pre>λ&gt; let x = CustomContext 10<br />λ&gt; x                       <br />CustomContext 10           <br />λ&gt; fmap (+5) x             <br />CustomContext 15           <br /></pre><br />We wrapped 10 in a context. We applied the function (+5) to the value inside our context. We got back a 15 wrapped in a context.</div><div><br /></div><div>Moving into Applicative territory now, it's not only the value that we operate on that has the context this time - it's also the function that we apply. We use the "pure" function to lift a value inside a context and we use "&lt;*&gt;" to apply a function to a value (both being inside their respective contexts).<br /><br />Here's how we'll define Applicative for our type.<br /><br /><script src="https://gist.github.com/4633738.js"></script> <br />The implementation of "pure" is straight forward, we're just going to pop the value in a "CustomContext" context. The sequential application function "&lt;*&gt;" is implemented very much how fmap was implemented, in fact it's the same. The difference comes in with how the parameters are supplied. We're taking the function out of the context, we take the value out of the context - we apply the function and wrap the result in the context.<br /><br />Here it is in action.<br /><br /><pre>λ&gt; CustomContext (+5) &lt;*&gt; CustomContext 10<br />CustomContext 15                          <br /><br /></pre>Also, with the use of "pure" lifting our values or functions into the context.<br /><br /><pre>λ&gt; pure (+5) &lt;*&gt; CustomContext 10<br />CustomContext 15                 <br />λ&gt; CustomContext (+5) &lt;*&gt; pure 10<br />CustomContext 15                 <br /></pre><br />Excellent. We've done it.<br /><br /><h3>Conclusion</h3></div><div>This may not be the most feature-rich example, but it should give you good insight into the implementation and workings of Applicative.</div><div>&nbsp;</div></div>
<h2>Comments</h2>
<div class='comments'>
</div>
