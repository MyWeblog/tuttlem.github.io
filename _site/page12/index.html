<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Cogs and Levers &middot; A blog full of technical stuff
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>A place for thoughts, ideas, tutorials and bookmarks. My brain can only hold so much, you know.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>

    

    
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    

    <a class="sidebar-nav-item" href="https://github.com/tuttlem/tuttlem.github.io">GitHub</a>
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2014. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <label for="sidebar-checkbox" class="sidebar-toggle"></label>

          <h3 class="masthead-title">
            <a href="/" title="Home">Cogs and Levers</a>
            <small>A blog full of technical stuff</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2013/03/04/mapreduce-parameters-in-mongo/">
        MapReduce parameters in Mongo
      </a>
    </h1>

    <span class="post-date">04 Mar 2013</span>

    <h1>MapReduce parameters in Mongo</h1>
<div class='post'>
<h3>Introduction</h3><div>I had <a href="http://cogsandlevers.blogspot.com.au/2013/01/a-brief-mapreduce-tutorial-for-mongodb.html">previously written</a> about MapReduce within the MongoDB context and as I refer back to that article I'm noticing that I'm using more features of this framework than I have explained initially. I today's post, I want to go through all of the parameters when defining a MapReduce query within MongoDB.</div><div><br /></div><h3>MapReduce</h3><div>Referring back to <a href="http://docs.mongodb.org/manual/applications/map-reduce/">the manual on MapReduce</a>, the function signature looks as follows:</div><div><br /><pre>db.collection.mapReduce(<br />  &lt;mapfunction&gt;,<br />  &lt;reducefunction&gt;,<br />  {<br />    out: &lt;collection&gt;,<br />    query: &lt;document&gt;,<br />    sort: &lt;document&gt;,<br />    limit: &lt;number&gt;,<br />    finalize: &lt;function&gt;,<br />    scope: &lt;document&gt;,<br />    jsMode: &lt;boolean&gt;,<br />    verbose: &lt;boolean&gt;<br />  }<br />)</pre></div><div><br /><b>mapFunction</b><br /><div>The map function is a function that takes no arguments that you use to associate values to keys. Using the emit function, you can map values to a key for use later in your reduce function.</div><div><br /></div><b>reduceFunction</b><br />The reduce function is a function that will take in a single key and an array of values. The purpose of the code inside the reduce function is to reduce your mapped values down into the aggregate values that you're looking for.<br /><br /><b>out</b></div><div>The out parameter takes the name of the collection that your mapReduce query will target. This is where the result will be stored.</div><div><br /></div><b>query</b><br /><div>The query parameter takes a document which acts as query criteria that will filter the data set that the map function (and therefore by process - the reduce function) will actually see.</div><div><br /></div><b>limit</b><br /><div>The limit parameter allows you to constrain the number of items presented to your mapReduce process.</div><div><br /></div><b>finalize</b><br /><div>The finalize function is a function that is executed after your reduce process. It's presented with a key and reduced value to work with. This is where you'd perform any ancillary processing on the reduced set prior to returning the result.</div><div><br /></div><b>scope</b><br /><div>The scope parameter allows you to specify global variables that your map, reduce and finalize functions can access. This is particularly handy for MapReduce operations that are reliant on parameters external to your process.</div><div><br /></div><b>jsMode</b><br /><div>The jsMode parameter determines how the MapReduce process will handle data between the map and reduce steps. Turning this on will force mongo to not convert your mapped results into BSON objects. This can make your queries run faster but they are constrained by the number of unique keys that can be worked on.</div><div><br /></div><b>verbose</b><br />Turning the verbose parameter on will give you some timing profiling for your query.<br /><br /><br />&nbsp;That's it for the MapReduce function call within Mongo.</div>
<h2>Comments</h2>
<div class='comments'>
</div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2013/02/24/pygame-part-5-music/">
        Pygame Part 5 Music
      </a>
    </h1>

    <span class="post-date">24 Feb 2013</span>

    <h1>Pygame Part 5 Music</h1>
<div class='post'>
<h3>Introduction</h3><div>In the previous article in this series, we were talking about adding sound effects to our games for that extra level of immersion. Sounds effects really do add that needed atmosphere to your game, but so does music. Music provides the perfect ambient touch to that game scene or just gives you an excuse to get your "8-bit" on!</div><div><br /></div><div>In today's post, we'll load some music from disk and play it while our ball is moving around the screen.&nbsp;We'll be using the <a href="http://en.wikipedia.org/wiki/WAV">WAV format</a> today for our media.<br /><br /><h3>Get loaded</h3></div><div>Using our code from the last article, all we need to do is issue a call to <a href="http://www.pygame.org/docs/ref/music.html#pygame.mixer.music.load">pygame.mixer.music.load</a>&nbsp;to get the wave file off disk and into memory. Once we've done this, we can start playing the loaded music track using <a href="http://www.pygame.org/docs/ref/music.html#pygame.mixer.music.play">pygame.mixer.music.play</a>. It takes a few parameters specific to playing the track, but for our purposes we'll play the track once and that's it.</div><div><br /></div><div>Here's the code.</div><div><br /><script src="https://gist.github.com/tuttlem/5023016.js"></script></div><div><br /></div><div><br /></div><div>So now our ball is flying around the window with Toto cranking out "Africa" in the background. Awesome :)<br /><br />Very simple code but very effective in adding atmosphere, ambience and emotion to your digital landscape.</div></div>
<h2>Comments</h2>
<div class='comments'>
</div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2013/02/24/pygame-part-4-sounding-off/">
        Pygame Part 4 Sounding Off
      </a>
    </h1>

    <span class="post-date">24 Feb 2013</span>

    <h1>Pygame Part 4 Sounding Off</h1>
<div class='post'>
<h3>Introduction</h3><div>Welcome to part 4 in this pygame series. We've been very visual so far, centring all of our topics on video-based items. Today's post, we're going to talk about audio and getting it integrated into your game. Sound effects are a great way to add atmosphere to your game and games just wouldn't be right without it. It's also very simple to get up and running.</div><div><br /></div><div>Just a final introductory point, we'll be using the <a href="http://en.wikipedia.org/wiki/WAV">WAV format</a> today as our media. Looking at the <a href="http://www.pygame.org/docs/ref/mixer.html">documentation for the sound module</a> in pygame, it appears that you can also use the <a href="http://en.wikipedia.org/wiki/Ogg">OGG format</a>.</div><div><br /></div><h3>Loading a sound</h3><div>The first thing you'll need to do is to initialize the mixer framework. All of this leans on the <a href="http://www.libsdl.org/projects/SDL_mixer/">SDL_mixer</a> module, so if you've done some <a href="http://www.libsdl.org/">SDL</a> before, this will all be very familiar (but much easier). We'll use <a href="http://www.pygame.org/docs/ref/mixer.html#pygame.mixer.init">pygame.mixer.init</a> to initialize the mixer module before use. It takes in all of the usuals (which you can read up on in the documentation), but they're all defaulted nicely for quick use. We'll then load a sound by creating a new Sound object using <a href="http://www.pygame.org/docs/ref/mixer.html#pygame.mixer.Sound">pygame.mixer.Sound</a>. The Sound object has all of the functions of immediate use to us like <a href="http://www.pygame.org/docs/ref/mixer.html#Sound.play">play</a>.</div><div><br /></div><div>We'll be using the code from <a href="http://cogsandlevers.blogspot.com.au/2013/02/pygame-part-3-loading-image.html">Tutorial 3</a> here. The bouncing object around the screen is going to make a sound whenever it hits a boundary. Sounds pretty straight-forward, and it is. Here's the code.</div><div><br /><script src="https://gist.github.com/tuttlem/5022653.js"></script></div><div><br /></div><div>And that's it really. You can see the calls to play, placed inside of the if blocks for when the ball is detected at the boundaries. I would screenshot this application as a picture for this article, but it's pretty useless to do so as it's an article on sound!<br /><br />Have fun.</div></div>
<h2>Comments</h2>
<div class='comments'>
</div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2013/02/19/pygame-part-3-loading-an-image/">
        Pygame Part 3 Loading An Image
      </a>
    </h1>

    <span class="post-date">19 Feb 2013</span>

    <h1>Pygame Part 3 Loading An Image</h1>
<div class='post'>
<h3>Introduction</h3><div>In the previous tutorials in this series, we learnt how to <a href="http://cogsandlevers.blogspot.com.au/2013/02/pygame-part-1-window.html">open a window</a> and how to <a href="http://cogsandlevers.blogspot.com.au/2013/02/pygame-part-2-eventing.html">respond to the quit event</a>. In today's post, we're going to actually put something on the screen!</div><div><br /></div><div>Depending on how your pygame installation has been applied, you may or may not have access to load different sorts of graphic formats into your game. For today's purposes, I'll just be loading <a href="http://en.wikipedia.org/wiki/BMP_file_format">bitmap format</a> (BMP) - seems pretty common amongst a lot of people's installations.</div><div><br /></div><h3>Images</h3><div>To load and work with images in our game, we'll be employing the help of the <a href="http://www.pygame.org/docs/ref/image.html">pygame.image</a> module. The <a href="http://www.pygame.org/docs/ref/image.html#pygame.image.load">load function</a>&nbsp;in this module takes in a path to where your image is on disk and returns you a <a href="http://www.pygame.org/docs/ref/surface.html">Surface</a> with your image loaded up on it. The other item of interest in the example code is that because we have been returned a&nbsp;<a href="http://www.pygame.org/docs/ref/surface.html">Surface</a>, we get all of the goodies that come along with it including being able to get the rectangle that bounds the image so we can measure it on screen.</div><div><br /></div><div>Here's the code.</div><div><br /><script src="https://gist.github.com/tuttlem/4985286.js"></script></div><div><br /><br />This still hasn't changed much through all of these posts. You'll see that actually getting the image involved in your game is achieved by using the <a href="http://www.pygame.org/docs/ref/surface.html#Surface.blit">blit</a> function which draws a surface to another using a rectangle.<br /><br />Providing your image is called spot and it's a blue ball, you should have something like this:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-eXL7kfPAjxk/USNsSXZqX5I/AAAAAAAAAmw/YaAlL7XXgB4/s1600/Screen+Shot+2013-02-19+at+10.11.52+PM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="277" src="http://2.bp.blogspot.com/-eXL7kfPAjxk/USNsSXZqX5I/AAAAAAAAAmw/YaAlL7XXgB4/s320/Screen+Shot+2013-02-19+at+10.11.52+PM.png" width="320" /></a></div><br /><br />That's about it really.<br /><br /></div></div>
<h2>Comments</h2>
<div class='comments'>
</div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2013/02/18/pygame-part-2-eventing/">
        Pygame Part 2 Eventing
      </a>
    </h1>

    <span class="post-date">18 Feb 2013</span>

    <h1>Pygame Part 2 Eventing</h1>
<div class='post'>
<h3>Introduction</h3><div>In my <a href="http://cogsandlevers.blogspot.com.au/2013/02/pygame-part-1-window.html">previous post</a>&nbsp;in this article series, we created a window and repeatedly painted black to the screen. A major flaw had crept into this application already. We weren't considering the operating system what so ever and therefore this made for a very unresponsive application.</div><div><br /></div><div>Events help our pygame applications respond to "things" that happen. This could be a key being pressed, the mouse being moved or simply that a quit message was sent to the application.</div><div><br /></div><div>Today's post will focus on processing events in our pygame application.</div><div><br /></div><h3>Listening for Events</h3><div>The <a href="http://www.pygame.org/docs/ref/event.html">documentation</a> on the event module in pygame is quite extensive. It covers everything off in the API and is the perfect reference for when you're stuck. We're interested in <a href="http://www.pygame.org/docs/ref/event.html#pygame.event.poll">pygame.event.poll</a> for our purposes. We'll use this function to continuously check for events of interest that have occurred.</div><div><br /></div><div>The only change from our initial code is that our game is controlled by a boolean as to weather it is still running or not. That variable then gets flipped if a quit message is detected by the framework.</div><div><br /></div><div>Here's the code.</div><div><br /><script src="https://gist.github.com/tuttlem/4976682.js"></script></div><div><br /></div><div><br /></div><div>This is a pretty simple example and don't let it fool you. The eventing system will cover all of your needs as far as responding to in-game actions.<br /><br />Running this code, the application will now respond to the operating system and will terminate gracefully when it receives a quit message.<br /><br />Simple.</div></div>
<h2>Comments</h2>
<div class='comments'>
</div>

  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page13">Older</a>
  
  
    
      <a class="pagination-item newer" href="/page11">Newer</a>
    
  
</div>
      </div>
    </div>

  </body>
</html>
