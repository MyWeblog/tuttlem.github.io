<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Follow up to a Camera Implementation &middot; Cogs and Levers
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>A place for thoughts, ideas, tutorials and bookmarks. My brain can only hold so much, you know.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>

    

    
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    

    <a class="sidebar-nav-item" href="https://github.com/tuttlem/tuttlem.github.io">GitHub</a>
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2014. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <label for="sidebar-checkbox" class="sidebar-toggle"></label>

          <h3 class="masthead-title">
            <a href="/" title="Home">Cogs and Levers</a>
            <small>A blog full of technical stuff</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="post">
  <h1 class="post-title">Follow up to a Camera Implementation</h1>
  <span class="post-date">30 Dec 2013</span>
  <h3 id="introduction">Introduction</h3>

<p>In a <a href="/2013/12/30/a-camera-implementation-in-c/">previous post</a> I&#39;d written about a simple camera implementation that you can use in projects of your own. This post I&#39;ll show how I&#39;ve implemented this camera with some mouse handling routines to make it feel like you&#39;re orienting your head with the mouse.</p>

<h3 id="the-idea">The Idea</h3>

<p>We&#39;ll capture all of the mouse movements given in an application and see how far the mouse deviates from a given origin point. I think that the most sane origin point to go from is the center of your window. For each movement that the mouse makes from the center of the window, we need to:</p>

<ul>
<li>Determine how much movement occurred on the x axis</li>
<li>Determine how much movement occurred on the y axis</li>
<li>Deaden this movement by a co-efficient to simulate mouse &quot;sensitivity&quot;</li>
<li>Set the yaw and pitch (head up/down, left/right) of the camera</li>
<li>Reset the mouse back to the origin point</li>
</ul>

<p>Here&#39;s how I&#39;ve done it in code:</p>

<div class="highlight"><pre><code class="c"><span class="kt">void</span> <span class="nf">mouseMotion</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// calculate the origin point (shifting right divides by two, remember!)</span>
  <span class="kt">int</span> <span class="n">halfWidth</span> <span class="o">=</span> <span class="n">windowWidth</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">halfHeight</span> <span class="o">=</span> <span class="n">windowHeight</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">;</span>

  <span class="c1">// calculate how far we deviated from the origin point and deaden this</span>
  <span class="c1">// by a factor of 20</span>
  <span class="kt">float</span> <span class="n">deltaX</span> <span class="o">=</span> <span class="p">(</span><span class="n">halfWidth</span> <span class="o">-</span> <span class="n">x</span><span class="p">)</span> <span class="o">/</span> <span class="mf">20.0f</span><span class="p">;</span>
  <span class="kt">float</span> <span class="n">deltaY</span> <span class="o">=</span> <span class="p">(</span><span class="n">halfHeight</span> <span class="o">-</span> <span class="n">y</span><span class="p">)</span> <span class="o">/</span> <span class="mf">20.0f</span><span class="p">;</span>

  <span class="c1">// don&#39;t do anything if there wasn&#39;t any movement to report</span>
  <span class="k">if</span> <span class="p">((</span><span class="n">deltaX</span> <span class="o">==</span> <span class="mf">0.0f</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">deltaY</span> <span class="o">==</span> <span class="mf">0.0f</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// set the camera&#39;s orientation</span>
  <span class="n">cam</span><span class="p">.</span><span class="n">yaw</span><span class="p">(</span><span class="n">deltaX</span><span class="p">);</span>
  <span class="n">cam</span><span class="p">.</span><span class="n">pitch</span><span class="p">(</span><span class="n">deltaY</span><span class="p">);</span>

  <span class="c1">// reset the mouse pointer back to the origin point</span>
  <span class="n">glutWarpPointer</span><span class="p">(</span><span class="n">halfWidth</span><span class="p">,</span> <span class="n">halfHeight</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>

<p>You can see that I&#39;m using GLUT to do these demos. The only GLUT-specific piece of code here is the warp command which puts the mouse back onto the origin point. You should have an equivalent function to do the same in the framework of your choice.</p>

<p>Well, there you have it. You can now orient your camera using your mouse.</p>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/2014/03/25/assembly-syntax-intel-at-t/">
            Assembly Syntax Intel At T
            <small>25 Mar 2014</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2014/03/24/xargs-i/">
            xargs -i
            <small>24 Mar 2014</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2014/03/19/a-quick-lap-with-mvar/">
            A Quick Lap with MVar
            <small>19 Mar 2014</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

      </div>
    </div>

  </body>
</html>
