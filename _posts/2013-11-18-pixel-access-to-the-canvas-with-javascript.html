---
layout: post
title: Pixel Access to the Canvas with Javascript
date: 2013-11-18
comments: false
---

<h1>{{ page.title }}</h1>
<div class='post'>
<h3>Introduction</h3>Gaining pixel-level access using the HTML canvas opens up some possibilities for some frame-buffer style rasterisation. Today's post will focus on the code required to get you access to this array.<br /><br />Here's the code on how to get started:<br /><br /><script src="https://gist.github.com/tuttlem/7526425.js"></script> <br /><br />First of all, we programmatically create our canvas object using <a href="http://www.w3schools.com/jsref/met_document_createelement.asp">document.createElement</a>. Using the inner dimensions of the window, we can then set the canvas' size. Of course this can be custom set to the dimensions you require - I just like to take over the whole window!<br /><br />Using the <a href="http://www.w3schools.com/tags/ref_canvas.asp">canvas object</a>, we then pull out the drawing context with getContext. The next part, using <a href="http://www.w3schools.com/tags/canvas_createimagedata.asp">createImageData</a> we then get a reference to the frame-buffer to draw to. This gives us read/write access to the canvas through an array.<br /><br />Finally, we'll take note of the width and height (this will come in handy later) and then pop the canvas onto the page.<br /><br /><h3>Frame-buffer structure</h3>So, I say "frame-buffer" - but it's just an array. It's quite nicely laid out such that pixels start at every 4 elements within the array. The first element being the red component, second is green, third is blue and the fourth is the alpha.<br /><br />Calculating an offset into the array is a piece of cake. For example, take the following piece of code which will allow you to set a single pixel on the frame-buffer.<br /><br /><script src="https://gist.github.com/tuttlem/7526558.js"></script> <br /><br />The main part to focus on here is the calculation of the offset. Above, I said it was important to take note of the dimensions - we're only using the width here. This is pretty straight forward calculation of an offset within a linear data segment with Cartesian co-ordinates.<br /><br /><h3>Flip out!</h3>Now that we've drawn all of the data to the image buffer (frame-buffer), we need a way to get it back onto our canvas. This is simply done using <a href="http://www.w3schools.com/tags/canvas_putimagedata.asp">putImageData</a>.<br /><br /><script src="https://gist.github.com/tuttlem/7526631.js"></script> <br /><br />That's it for now. </div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>SEO Dewintec</div>
<div class='content'>
This comment has been removed by a blog administrator.</div>
</div>
</div>
