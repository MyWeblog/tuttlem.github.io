<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Cogs and Levers &middot; A blog full of technical stuff
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>A place for thoughts, ideas, tutorials and bookmarks. My brain can only hold so much, you know.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>

    

    
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    

    <a class="sidebar-nav-item" href="https://github.com/tuttlem/tuttlem.github.io">GitHub</a>
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2014. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <label for="sidebar-checkbox" class="sidebar-toggle"></label>

          <h3 class="masthead-title">
            <a href="/" title="Home">Cogs and Levers</a>
            <small>A blog full of technical stuff</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2013/01/28/making-a-big-math-library/">
        Making a Big Math Library
      </a>
    </h1>

    <span class="post-date">28 Jan 2013</span>

    <h1>Making a Big Math Library</h1>
<div class='post'>
<h3>Introduction</h3><div>In most of your day to day applications, numbers that fit within 8, 16, 32 and 64 bits are enough. Sometimes you may need to stretch out into your floating point processor to include some more precision and start looking at 80 bit numbers.</div><div><br /></div><div>Today's post, I want to start on a library in assembly language that works on even bigger numbers. There are going to be some caveats or conditions that we'll establish up front, but they will be big numbers!</div><div><br /></div><div>The design considerations for this library will be as follows:</div><div><ul><li>Unsigned integers</li><li>Fixed size</li></ul><div>With this information, we can now start to build our library.</div></div><div><br /></div><h3>The big number data type</h3><div>Well, it's not really that special at all. We just need to define an array of quad-words to the length that we want. So, an example would look like this.</div><div><br /><script src="https://gist.github.com/4652710.js"></script></div><div><br /></div><div>That's all pretty simple. A number is just an array of a pre-defined length. With a length to 10, at 64 bits per array index we've got ourselves a 640 bit number. Quite large. In fact, we're talking numbers up to 4.562441e+192. Now that's impressive.<br /><br /><h3>Lets operate!</h3></div><div>We've got a very impressive data type that we can declare where ever we want, but how do we use it? We need to define all of the management, arithmetic, logic and printing ourselves. First of all though, we'll want to be able to zero out our number, which is just continually writing zeros over our memory buffer (much like a memset).</div><div><br /><script src="https://gist.github.com/4652737.js"></script></div><div><br /><br />Excellent. We can initialize our big number now to zero so that we have a starting point. Next, we'll want to be able to debug any problems that we may have while building this library, so its going to be of great benefit to be able to see what the value is of our number.<br /><br />The following code leans on some assembly I had written in a <a href="http://cogsandlevers.blogspot.com.au/2013/01/printing-registers-value-in-hex.html">previous article</a> which displays the value in RAX. Here's how we'll print our big number to screen.<br /><br /><script src="https://gist.github.com/4652780.js"></script> <br />Most obvious thing to note here is that we're moving through the bignumber back-to-front so that it's presented on screen in a human manner. We can test what we have so far is working by writing a small piece of test code.<br /><br /><script src="https://gist.github.com/4652889.js"></script> </div><div>Which, rather uninterestingly will just spit out a massive list of zeros.<br /><br /><pre>0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000</pre><br />So, lets do something a little more interesting. The smallest pieces of arithmetic that I think we can implement for these numbers is increment and decrement.<br /><br /><h3>Increment</h3></div><div>This is straight forward. Add 1 to the lowest part of the number. If that part of the number just "clocked", or reset to zero - we must carry our value onto a higher block.</div><div><br /><script src="https://gist.github.com/4652917.js"></script></div><div><br />Alright, we've got incrementation going on here. The most interesting case for us to test is when a block is sitting on the carry boundary or sitting at 0xffffffffffffffff. After we increment that, we should see that clear out to zero and the next block to get a 1.<br /><script src="https://gist.github.com/4652929.js"></script> <br />Which results in the following.<br /><br /><pre>000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FFFFFFFFFFFFFFFF<br /><br />0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000<br /></pre><br />Those massive trails of zeros are getting annoying. We can clean them up later by making our print routine a little smarter. But you can see that we've successfully incremented over a boundary so that our next higher block gets a one.<br /><br /><h3>Decrement</h3></div><div>This is pretty much as straight forward as incrementing, on this time we're not going to carry to a higher quad-word, we're going to borrow from it if we do cross a boundary. Here's the code for a decrement.</div><div><br /><script src="https://gist.github.com/4652945.js"></script></div><div><br />This really is the increment routine just with the numeric direction reversed. Making sure that we are on the right track, we can test out the decrement across a boundary again.<br /><br /><script src="https://gist.github.com/4652953.js"></script> <br />The output of which looks like this.<br /><br /><pre>000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FFFFFFFFFFFFFFFF<br /><br />0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000<br /><br />000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FFFFFFFFFFFFFFFF<br /></pre><br />Again, it's pretty hideous with the trailing zeros, but you can see this in action now. Back and forth, across boundaries - no sweat.<br /><br /><h3>Conclusion</h3></div><div>Well, this is just the tip of the iceberg for this particular library. I'd hope to demonstrate logical testing, addition, subtraction, multiplication and division as well shortly.</div><div><br /></div><div>The best part about these routines is that if you wanted to operate on 6400 bit numbers, all you have to do is change the constant "bignum_size" that I'd set earlier to 100.</div></div>
<h2>Comments</h2>
<div class='comments'>
</div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2013/01/25/monoids-and-associativity/">
        Monoids and Associativity
      </a>
    </h1>

    <span class="post-date">25 Jan 2013</span>

    <h1>Monoids and Associativity</h1>
<div class='post'>
<h3>Introduction</h3>Associativity is a property of a function which has an output equivalent&nbsp;no matter what order the function is applied. Addition and product are examples of mathematical functions that are associative as opposed to subtraction and division which are not.<br /><br />Today's post will focus on associative functions and their definitions through Monoids in Haskell.<br /><br /><h3>Associative functions</h3>In the introduction to this post, I spoke about associative functions and gave a few examples. Here are those examples again, but demonstrated mathematically.<br /><br /><pre>(5 * 7) * 9 == 5 * (7 * 9)<br />(5 + 7) + 9 == 5 + (7 + 9)<br />(5 - 7) - 9 != 5 - (7 - 9)<br />(5 / 7) / 9 != 5 / (7 / 9)<br /></pre><br />These examples are pretty straight forward in their reading. You can see clearly that the product and addition operators are associative, subtraction and division not.<br /><br />String concatenation (or array concatenation) is also associative such that:<br /><br /><pre>"Hello " ++ ("World" ++ "!") == ("Hello " ++ "World") ++ "!"</pre><br />These proofs are pretty straight forward. I think that you should have the idea of what associative functions are by now.<br /><br /><h3>Monoids</h3><div>Monoids are Haskell's way of decorating a type that is functionally associative. The definition of a Monoid is as follows.</div><div><br /><script src="https://gist.github.com/4627949.js"></script></div><div><br /></div><div><br /></div><div>You can find more information specifically about the type up on the <a href="http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-Monoid.html">Haskell Wiki</a>. From the definition above, we can see that there are 3 functions to be defined.<br /><br /><h3>mempty</h3></div><div>mempty is the identity value for the monoid. It acts more like a constant rather than a function.</div><div><br /></div><h3>mappend</h3><div>mappend is the binary function that can be used between two of these typed Monoids.</div><div><br /></div><h3>mconcat</h3><div>mconcat folds the mappend function between the elements of an array of Monoids.</div><div><br /></div><h3>Monoid Laws</h3><div>Above, I have gone through the basic principals of associative functions which by-and-large cover off on the laws that a Monoid must abide by. There are some explicit ways of writing this concept, there are as follows.</div><div><ul><li><pre>mempty `mappend` x = x</pre></li><li><pre>x `mappend` mempty = x</pre></li><li><pre>(x `mappend` y) `mappend` z = x `mappend` (y `mappend` z)</pre></li></ul></div><div><br /></div><div>That's Monoids for you. Take a look as some example implementations on the Wiki and around the web.</div></div>
<h2>Comments</h2>
<div class='comments'>
</div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2013/01/25/applying-applicative/">
        Applying Applicative
      </a>
    </h1>

    <span class="post-date">25 Jan 2013</span>

    <h1>Applying Applicative</h1>
<div class='post'>
<h3>Introduction</h3><div>In a <a href="http://cogsandlevers.blogspot.com.au/2013/01/applicative-functors-in-haskell.html">previous post</a>, I had pretty much got the textbook definition down for an Applicative Functor and shown some of its pre-existing uses. Today's post, I want to walk through some code that I've written that implements Applicative.</div><div><br /></div><h3>Put it in context!</h3><div>Right on! It's all about context. When making instances of the <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t:Functor">Functor</a> typeclass, it's all about defining <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:fmap">fmap</a> appropriately to "operate" on the data that sits in a context.</div><div><br /></div><div>What's a context then? The books and articles that I've read use pre-existing types as examples. A list for instance is a context, <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t:Either">Either</a> is a context, <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t:Maybe">Maybe</a> is a context. All of these things wrap data. So, let's make our own context to put something in.</div><div><br /><script src="https://gist.github.com/4633650.js"></script></div><div><br /></div><div>There's our context, "CustomContext". It just wraps around something .. anything. We can apply a functor instance to this with the following.<br /><br /><script src="https://gist.github.com/4633664.js"></script></div><div><br /><a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:fmap">fmap</a>&nbsp;allows a function to get inside the context and operate on the inner data - alright, I've said this already. Proof that all of this is working is as follows.<br /><br /><pre>λ&gt; let x = CustomContext 10<br />λ&gt; x                       <br />CustomContext 10           <br />λ&gt; fmap (+5) x             <br />CustomContext 15           <br /></pre><br />We wrapped 10 in a context. We applied the function (+5) to the value inside our context. We got back a 15 wrapped in a context.</div><div><br /></div><div>Moving into Applicative territory now, it's not only the value that we operate on that has the context this time - it's also the function that we apply. We use the "pure" function to lift a value inside a context and we use "&lt;*&gt;" to apply a function to a value (both being inside their respective contexts).<br /><br />Here's how we'll define Applicative for our type.<br /><br /><script src="https://gist.github.com/4633738.js"></script> <br />The implementation of "pure" is straight forward, we're just going to pop the value in a "CustomContext" context. The sequential application function "&lt;*&gt;" is implemented very much how fmap was implemented, in fact it's the same. The difference comes in with how the parameters are supplied. We're taking the function out of the context, we take the value out of the context - we apply the function and wrap the result in the context.<br /><br />Here it is in action.<br /><br /><pre>λ&gt; CustomContext (+5) &lt;*&gt; CustomContext 10<br />CustomContext 15                          <br /><br /></pre>Also, with the use of "pure" lifting our values or functions into the context.<br /><br /><pre>λ&gt; pure (+5) &lt;*&gt; CustomContext 10<br />CustomContext 15                 <br />λ&gt; CustomContext (+5) &lt;*&gt; pure 10<br />CustomContext 15                 <br /></pre><br />Excellent. We've done it.<br /><br /><h3>Conclusion</h3></div><div>This may not be the most feature-rich example, but it should give you good insight into the implementation and workings of Applicative.</div><div>&nbsp;</div></div>
<h2>Comments</h2>
<div class='comments'>
</div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2013/01/24/type-newtype-data/">
        type, newtype & data
      </a>
    </h1>

    <span class="post-date">24 Jan 2013</span>

    <h1>type, newtype & data</h1>
<div class='post'>
<h3>Introduction</h3><div>This post is just a small write up on the differences between these three keywords and their uses within Haskell.</div><div><br /></div><h3>type</h3><div>Using the "type" keyword is the same as just referring to the actual type that you've declared. In other words, "type" just lets you make a synonym for the original type.</div><div><br /><script src="https://gist.github.com/4613925.js"></script></div><div>Using these, we'll be able to refer to a Card list as a Deck. They can be used&nbsp;interchangeably as they'll directly cast. All this really does for us, is gives a pre-existing type a more meaningful name to our code.<br /><h3>newtype</h3></div><div>Using the "newtype" keyword, we make a thin wrapper around an existing type. Something that will be treated differently at compile time, but will be directly translatable (and not subject to conversion) at runtime.&nbsp;</div><div><br /><script src="https://gist.github.com/4599121.js"></script></div><div><br />"newtype" only allows you one constructor and one field. It's important that its used when you're creating data entries that have these constraints on them. These attributes make "newtype" a great candidate for when you just want to add a typeclass instance to an existing type.<br /><br /><h3>data</h3></div><div>The "data" keyword allows you to build much more complex types. With the "data" keyword, you can have as many constructors and fields as you like.</div><div><br /><script src="https://gist.github.com/4614176.js"></script></div><div>Of course, it would make more sense to use "record syntax" when defining these datatypes above.<br /><br /><script src="https://gist.github.com/4614325.js"></script> <h3>Wrapping up</h3></div><div><ul><li>Use "type" to give your types more meaningful names</li><li>Use "newtype" if you just want to take an existing type and add a typeclass instance to it</li><li>Use "data" if you want to create your own datatype</li></ul></div></div>
<h2>Comments</h2>
<div class='comments'>
</div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2013/01/24/installing-debian-squeeze-on-a-t400/">
        Installing Debian Squeeze on a T400
      </a>
    </h1>

    <span class="post-date">24 Jan 2013</span>

    <h1>Installing Debian Squeeze on a T400</h1>
<div class='post'>
This post is just a quick guide for myself on getting <a href="http://www.debian.org/">Debian</a> Squeeze installed on my T400. This guide will assume that you have already downloaded <a href="http://www.debian.org/CD/netinst/">netinst</a> media, burnt it to CD.<br /><br />Everything out of the box works pretty well. Wifi needs a little extra attention, so .. onto the guide.<br /><h3>Before you begin</h3>You'll need these from off the web:<br /><ul><li>iwlwifi-5000-1.ucode, iwlwifi-5000-2.ucode</li><li>wireless-tools</li><li>libpcsclite</li><li>libnl</li><li>libdbus</li><li>wpa_supplicant</li></ul><br /><b>*Note*</b> Through the installation process, the installer will complain that you don't have some non-free firmware. Whilst you can write the requested files&nbsp;<i>iwlfifi-5000-2.ucode</i> &amp; <i>iwlwifi-5000-1.ucode</i> to a USB stick and supply it to the installer, I still wasn't able to get wifi running through the installer. I activate it later.<br /><br />Continue the installation as normal until you're at the other end.<br /><br /><h3>Get wireless running</h3>The part of the guide is roughly based on the <a href="http://wiki.debian.org/WiFi">WIFI guide</a> on the Debian site as well as the <a href="http://wiki.debian.org/WiFi/HowToUse#Command_Line">WIFI HowTo</a>.<br /><br />Once you're system is up, mount your media that has <i>wireless-tools. </i>Install this package with the following command.<br /><br /><pre># dpkg -i wireless-tools*.deb</pre><br />Also install <i>wpa_supplicant</i>&nbsp;while you're there.<br /><br /><pre># dpkg -i libpcsclite*.deb<br /># dpkg -i libnl*.deb<br /># dpkg -i libdbus*.deb<br /># dpkg -i wpa_supplicant*.deb</pre><br />Next, we'll add an entry into the /etc/network/interfaces file for our wireless interface. It should look something like the following.<br /><br /><pre>auto wlan0<br />iface wlan0 inet dhcp<br />    wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf<br /></pre><br />We now need to configure wpa_supplicant in the file that we specified above. Create a new file at /etc/wpa_supplicant/wpa_supplicant.conf and add the following details.<br /><br /><pre>ctrl_interface=/var/run/wpa_supplicant<br /><br />ap_scan=1<br /><br />network={<br />      ssid="network-name"<br />      key_mgmt=WPA-PSK<br />      psk="secret-key"<br />}</pre><br />Bring the wireless interface up.<br /><br /><pre># ifup wlan0</pre><br />You should have an IP address now.<br /><br /><h3>Setting up software sources</h3><div>First things first. We need to change our sources list for apt. Change /etc/apt/sources.list to look like the following</div><div><br /><pre>deb http://mirror.aarnet.edu.au/debian stable main contrib non-free<br />deb-src http://mirror.aarnet.edu.au/debian stable main contrib non-free<br /><br />deb http://ftp.debian.org/debian/ squeeze-updates main contrib non-free<br />deb-src http://ftp.debian.org/debian/ squeeze-updates main contrib non-free<br /><br />deb http://security.debian.org/ squeeze/updates main contrib non-free<br />deb-src http://security.debian.org/ squeeze/updates main contrib non-free<br /><br />deb http://www.deb-multimedia.org squeeze main non-free<br /></pre></div><div><br />Update and upgrade the system here.<br /><br /><pre># aptitude update &amp;&amp; aptitude upgrade</pre><br />Add keyring package for the <a href="http://deb-multimedia.org/">Debian Multimedia</a> repository.<br /><br /><pre># aptitude install deb-multimedia-keyring</pre><br />Re-update!<br /><br /><pre># aptitude update</pre><div><br /></div><h3>Get the basics installed</h3><div>The staple applications need to get onto the machine, so we'll install them now.</div><div><br /><pre># aptitude install zsh sudo vim git lynx</pre></div><div><br />Setup sudo by adding your normal user account to the group "sudo".<br /><br /><pre># usermod michael -aG sudo</pre><br />Now, leave the root account alone!<br /><br />Change your default shell to zsh with the following command<br /><br /><pre>$ chsh -s /usr/bin/zsh michael</pre><br />With git installed, you'll be able to clone your dotfiles repository and take most of the configuration headaches away pretty quickly.<br /><br /><h3>X (xfce)</h3><div>Install X server, xfce, gdm and associated utilities with the following.</div><div><br /><pre>$ sudo aptitude install xorg xfce4 xfce4-goodies gdm</pre></div><div><br />Install a "sane" browser.<br /><br /><div><pre style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">$ sudo aptitude install chromium-browser</pre></div><div></div></div><h3></h3><h3></h3><h3>Development Environment</h3><div>Install the standard build tools. You'll need to add the testing repository as described in <a href="http://cogsandlevers.blogspot.com.au/2013/01/getting-c11-support-in-debian.html">this post</a>.</div><div><br /></div><div><pre>$ sudo aptitude install --target-release testing nasm gcc-4.7 g++-4.7 make</pre></div><div><br /></div><div>Haskell goes on next. Take it from the testing repository also as it'll be a later version.<br /><br /><pre>$ sudo aptitude install --target-release testing haskell-platform<br />$ cabal update<br />$ cabal install cabal-install<br />$ cabal install cabal-dev</pre></div><div><br />Python and associated environments - getting 2.7 as the default version for the machine.<br /><br /><pre>$ sudo aptitude install --target-release testing python2.7<br />$ sudo update-alternatives --install /usr/bin/python python /usr/bin/python2.7 2<br />$ sudo update-alternatives --install /usr/bin/python python /usr/bin/python2.6 1<br /></pre><br /><pre style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">$ sudo aptitude install --target-release testing python-setuptools</pre><br />easy_install, pip &amp; virtualenv next.<br /><br /><pre>$ sudo easy_install pip<br />$ sudo pip install virtualenv</pre><br />Install RVM<br /><br /><pre>$ curl -L https://get.rvm.io | bash -s stable --ruby</pre><br />Follow the requirements as directed by the RVM requirements screen. Perform usual ruby system updates.<br /><br /><pre>$ gem update --system<br />$ gem update</pre><br /><h3>To be continued . . .</h3></div></div></div></div>
<h2>Comments</h2>
<div class='comments'>
</div>

  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page16">Older</a>
  
  
    
      <a class="pagination-item newer" href="/page14">Newer</a>
    
  
</div>
      </div>
    </div>

  </body>
</html>
