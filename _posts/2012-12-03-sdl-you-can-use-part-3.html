---
layout: post
title: SDL you can use (part 3)
date: 2012-12-03
comments: false
---

<h1>{{ page.title }}</h1>
<div class='post'>
<h3>Introduction</h3><div>Setting up a window using the SDL framework is quite a trivial task. Attaching a message loop to the application is also rather easy and I take you through that in <a href="http://cogsandlevers.blogspot.com.au/2012/12/sdl-you-can-use-part-2.html">this</a> previous article.</div><div><br /></div><div>This article will set you up ready to load in your <a href="http://www.opengl.org/">OpenGL</a> functionality. I think it's important to make clear that this is not going to be a tutorial on&nbsp;<a href="http://www.opengl.org/">OpenGL</a>, rather it'll be a tutorial on how to get to using it. If you are interested in some in-depth&nbsp;<a href="http://www.opengl.org/">OpenGL</a>&nbsp;topics, I suggest you read the <a href="http://nehe.gamedev.net/">tutorials from NeHe</a>&nbsp;- there's quite an extensive set of articles over there.</div><div><br /></div><div>Anyway, onto the code!</div><div><br /></div><h3>Setting the video mode (correctly)</h3><div>Doing some analysis of the <a href="http://www.libsdl.org/docs/html/sdlsetvideomode.html">SDL_SetVideoMode</a>&nbsp;function, the last parameter is going to be of most interest to us. Quoted from the API documentation:</div><div><br /></div><div><table border="1" class="CALSTABLE"><tbody><tr><td align="LEFT" valign="TOP"><tt class="LITERAL" >SDL_SWSURFACE</tt></td><td align="LEFT" valign="TOP"><span >Create the video surface in system memory</span></td></tr><tr><td align="LEFT" valign="TOP"><tt class="LITERAL" >SDL_HWSURFACE</tt></td><td align="LEFT" valign="TOP"><span >Create the video surface in video memory</span></td></tr><tr><td align="LEFT" valign="TOP"><tt class="LITERAL" >SDL_ASYNCBLIT</tt></td><td align="LEFT" valign="TOP"><span >Enables the use of asynchronous updates of the display surface. This will usually slow down blitting on single CPU machines, but may provide a speed increase on SMP systems.</span></td></tr><tr><td align="LEFT" valign="TOP"><tt class="LITERAL" >SDL_ANYFORMAT</tt></td><td align="LEFT" valign="TOP"><span >Normally, if a video surface of the requested bits-per-pixel (<tt class="PARAMETER"><i>bpp</i></tt>) is not available, SDL will emulate one with a shadow surface. Passing&nbsp;<tt class="LITERAL">SDL_ANYFORMAT</tt>&nbsp;prevents this and causes SDL to use the video surface, regardless of its pixel depth.</span></td></tr><tr><td align="LEFT" valign="TOP"><tt class="LITERAL" >SDL_HWPALETTE</tt></td><td align="LEFT" valign="TOP"><span >Give SDL exclusive palette access. Without this flag you may not always get the the colors you request with&nbsp;<a href="http://www.libsdl.org/docs/html/sdlsetcolors.html"><tt class="FUNCTION">SDL_SetColors</tt></a>&nbsp;or&nbsp;<a href="http://www.libsdl.org/docs/html/sdlsetpalette.html"><tt class="FUNCTION">SDL_SetPalette</tt></a>.</span></td></tr><tr><td align="LEFT" valign="TOP"><tt class="LITERAL" >SDL_DOUBLEBUF</tt></td><td align="LEFT" valign="TOP"><span >Enable hardware double buffering; only valid with SDL_HWSURFACE. Calling&nbsp;<a href="http://www.libsdl.org/docs/html/sdlflip.html"><tt class="FUNCTION">SDL_Flip</tt></a>&nbsp;will flip the buffers and update the screen. All drawing will take place on the surface that is not displayed at the moment. If double buffering could not be enabled then&nbsp;<tt class="FUNCTION">SDL_Flip</tt>&nbsp;will just perform a&nbsp;<a href="http://www.libsdl.org/docs/html/sdlupdaterect.html"><tt class="FUNCTION">SDL_UpdateRect</tt></a>&nbsp;on the entire screen.</span></td></tr><tr><td align="LEFT" valign="TOP"><tt class="LITERAL" >SDL_FULLSCREEN</tt></td><td align="LEFT" valign="TOP"><span >SDL will attempt to use a fullscreen mode. If a hardware resolution change is not possible (for whatever reason), the next higher resolution will be used and the display window centered on a black background.</span></td></tr><tr><td align="LEFT" valign="TOP"><tt class="LITERAL" >SDL_OPENGL</tt></td><td align="LEFT" valign="TOP"><span >Create an OpenGL rendering context. You should have previously set OpenGL video attributes with&nbsp;<a href="http://www.libsdl.org/docs/html/sdlglsetattribute.html"><tt class="FUNCTION">SDL_GL_SetAttribute</tt></a>.</span></td></tr><tr><td align="LEFT" valign="TOP"><tt class="LITERAL" >SDL_OPENGLBLIT</tt></td><td align="LEFT" valign="TOP"><span >Create an OpenGL rendering context, like above, but allow normal blitting operations. The screen (2D) surface may have an alpha channel, and&nbsp;<a href="http://www.libsdl.org/docs/html/sdlupdaterects.html"><tt class="FUNCTION">SDL_UpdateRects</tt></a>&nbsp;must be used for updating changes to the screen surface. NOTE: This option is kept for compatibility only, and is&nbsp;<span class="emphasis"><i class="EMPHASIS">not</i></span>&nbsp;recommended for new code.</span></td></tr><tr><td align="LEFT" valign="TOP"><tt class="LITERAL" >SDL_RESIZABLE</tt></td><td align="LEFT" valign="TOP"><span >Create a resizable window. When the window is resized by the user a&nbsp;<a href="http://www.libsdl.org/docs/html/sdlresizeevent.html"><tt class="LITERAL">SDL_VIDEORESIZE</tt></a>&nbsp;event is generated and&nbsp;<tt class="FUNCTION">SDL_SetVideoMode</tt>&nbsp;can be called again with the new size.</span></td></tr><tr><td align="LEFT" valign="TOP"><tt class="LITERAL" >SDL_NOFRAME</tt></td><td align="LEFT" valign="TOP"><span >If possible,&nbsp;<tt class="LITERAL">SDL_NOFRAME</tt>&nbsp;causes SDL to create a window with no title bar or frame decoration. Fullscreen modes automatically have this flag set.</span></td></tr></tbody></table><br /><br />So, it's in our best interest to ensure that we set the video mode with SDL_HWSURFACE, SDL_DOUBLEBUF and SDL_OPENGL (optionally SDL_FULLSCREEN if we don't want to be windowed).<br /><br />Changing our startup code into this<br /><br /><script src="https://gist.github.com/4194156.js?file=gistfile1.c"></script> <br /><br />As long as all goes well, you'll be issuing OpenGL commands against your application, so don't forget to include your GL headers in your application.<br /><br /></div></div>
<h2>Comments</h2>
<div class='comments'>
</div>
